<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Plot and Save Estimated Marginal Means (EMMs) — plot_and_save_emmeans • tyler</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Plot and Save Estimated Marginal Means (EMMs) — plot_and_save_emmeans"><meta name="description" content="This function computes the estimated marginal means (EMMs) from a model object, creates a plot of the EMMs with confidence intervals, and saves the plot to a specified directory. This is particularly useful in studies like mystery caller studies where you need to analyze differences in outcomes such as appointment wait times across different groups or treatments."><meta property="og:description" content="This function computes the estimated marginal means (EMMs) from a model object, creates a plot of the EMMs with confidence intervals, and saves the plot to a specified directory. This is particularly useful in studies like mystery caller studies where you need to analyze differences in outcomes such as appointment wait times across different groups or treatments."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tyler</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>TRUE</h6></li>
    <li><a class="dropdown-item" href="../articles/create_isochrones.html">Gathering Drive Time Isochrones</a></li>
    <li><a class="dropdown-item" href="../articles/geocode.html">Geocoding</a></li>
    <li><a class="dropdown-item" href="../articles/get_census_data.html">Getting Data from the US Census Bureau for Isochrones</a></li>
    <li><a class="dropdown-item" href="../articles/imotive-news.html">Imotive News &amp; Changelog</a></li>
    <li><a class="dropdown-item" href="../articles/my-vignette.html">Searching the NPI Database Starting with Taxonomy Codes</a></li>
    <li><a class="dropdown-item" href="../articles/search_and_process_npi.html">Search and Process NPI Numbers</a></li>
    <li><a class="dropdown-item" href="../articles/aggregating_provider_data.html">Aggregating Provider Data for Analysis</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html#datasets">Datasets</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/mufflyt/tyler/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Plot and Save Estimated Marginal Means (EMMs)</h1>
      <small class="dont-index">Source: <a href="https://github.com/mufflyt/tyler/blob/HEAD/R/plot_and_save_emmeans.R" class="external-link"><code>R/plot_and_save_emmeans.R</code></a></small>
      <div class="d-none name"><code>plot_and_save_emmeans.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function computes the estimated marginal means (EMMs) from a model object, creates a plot of the EMMs with confidence intervals, and saves the plot to a specified directory. This is particularly useful in studies like mystery caller studies where you need to analyze differences in outcomes such as appointment wait times across different groups or treatments.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">plot_and_save_emmeans</span><span class="op">(</span></span>
<span>  <span class="va">model_object</span>,</span>
<span>  <span class="va">specs</span>,</span>
<span>  <span class="va">variable_of_interest</span>,</span>
<span>  <span class="va">color_by</span>,</span>
<span>  output_dir <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-model-object">model_object<a class="anchor" aria-label="anchor" href="#arg-model-object"></a></dt>
<dd><p>A fitted model object from which EMMs are to be computed. This can be a generalized linear model (GLM), linear model, or other suitable models.</p></dd>


<dt id="arg-specs">specs<a class="anchor" aria-label="anchor" href="#arg-specs"></a></dt>
<dd><p>A character string specifying the predictor variable(s) for which EMMs are to be computed. For example, this could be the treatment groups, scenarios, or demographic variables.</p></dd>


<dt id="arg-variable-of-interest">variable_of_interest<a class="anchor" aria-label="anchor" href="#arg-variable-of-interest"></a></dt>
<dd><p>A character string specifying the variable to be plotted on the x-axis. Typically, this would be the same as the <code>specs</code>.</p></dd>


<dt id="arg-color-by">color_by<a class="anchor" aria-label="anchor" href="#arg-color-by"></a></dt>
<dd><p>A character string specifying the variable used to color the points and error bars. This could be a categorical variable like gender, insurance type, or academic affiliation.</p></dd>


<dt id="arg-output-dir">output_dir<a class="anchor" aria-label="anchor" href="#arg-output-dir"></a></dt>
<dd><p>A character string specifying the directory where the plot will
be saved. Defaults to a session-specific folder inside <code><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Invisibly returns a list containing the estimated marginal means data (<code>data</code>) and the ggplot object (<code>plot</code>).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function computes EMMs using the <code>emmeans</code> package, which provides adjusted means (or other summary statistics) for the levels of factors, corrected for the influence of other predictors in the model. This is particularly useful in the context of mystery caller studies, where you might want to compare outcomes such as appointment wait times between different insurance types, scenarios, or demographic groups, while controlling for potential confounders.</p>
<p>The plot generated by this function displays the EMMs along with their 95% confidence intervals, making it easy to visualize the differences between groups. The plot is saved to a specified directory with a unique filename that includes a timestamp.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Example 1: Comparing Appointment Wait Times Between Scenarios</span></span></span>
<span class="r-in"><span><span class="co"># Assume 'model' is a fitted GLM object with appointment wait time as the outcome</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">plot_and_save_emmeans</span><span class="op">(</span></span></span>
<span class="r-in"><span>  model_object <span class="op">=</span> <span class="va">model</span>,</span></span>
<span class="r-in"><span>  specs <span class="op">=</span> <span class="st">"scenario"</span>,</span></span>
<span class="r-in"><span>  variable_of_interest <span class="op">=</span> <span class="st">"scenario"</span>,</span></span>
<span class="r-in"><span>  color_by <span class="op">=</span> <span class="st">"insurance"</span>,</span></span>
<span class="r-in"><span>  output_dir <span class="op">=</span> <span class="st">"Figures/ScenarioComparison"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 2: Comparing EMMs Across Different Insurance Types</span></span></span>
<span class="r-in"><span><span class="co"># Assume 'model' is a fitted GLM object</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">plot_and_save_emmeans</span><span class="op">(</span></span></span>
<span class="r-in"><span>  model_object <span class="op">=</span> <span class="va">model</span>,</span></span>
<span class="r-in"><span>  specs <span class="op">=</span> <span class="st">"insurance"</span>,</span></span>
<span class="r-in"><span>  variable_of_interest <span class="op">=</span> <span class="st">"insurance"</span>,</span></span>
<span class="r-in"><span>  color_by <span class="op">=</span> <span class="st">"academic"</span>,</span></span>
<span class="r-in"><span>  output_dir <span class="op">=</span> <span class="st">"Figures/InsuranceComparison"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 3: Visualizing EMMs for Different Age Groups in a Mystery Caller Study</span></span></span>
<span class="r-in"><span><span class="co"># Assume 'model' is a fitted GLM object with age groups as a factor</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">plot_and_save_emmeans</span><span class="op">(</span></span></span>
<span class="r-in"><span>  model_object <span class="op">=</span> <span class="va">model</span>,</span></span>
<span class="r-in"><span>  specs <span class="op">=</span> <span class="st">"age_group"</span>,</span></span>
<span class="r-in"><span>  variable_of_interest <span class="op">=</span> <span class="st">"age_group"</span>,</span></span>
<span class="r-in"><span>  color_by <span class="op">=</span> <span class="st">"gender"</span>,</span></span>
<span class="r-in"><span>  output_dir <span class="op">=</span> <span class="st">"Figures/AgeGroupComparison"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 4: Interaction Effects Between Gender and Insurance Type</span></span></span>
<span class="r-in"><span><span class="co"># Assume 'model' is a fitted GLM object</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">plot_and_save_emmeans</span><span class="op">(</span></span></span>
<span class="r-in"><span>  model_object <span class="op">=</span> <span class="va">model</span>,</span></span>
<span class="r-in"><span>  specs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gender"</span>, <span class="st">"insurance"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  variable_of_interest <span class="op">=</span> <span class="st">"gender"</span>,</span></span>
<span class="r-in"><span>  color_by <span class="op">=</span> <span class="st">"insurance"</span>,</span></span>
<span class="r-in"><span>  output_dir <span class="op">=</span> <span class="st">"Figures/InteractionEffects"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tyler Muffly.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

