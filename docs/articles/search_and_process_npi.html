<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Search and Process NPI Numbers • tyler</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Search and Process NPI Numbers">
<meta name="description" content="A function to search and process National Provider Identifier (NPI) numbers from first and last name.
">
<meta property="og:description" content="A function to search and process National Provider Identifier (NPI) numbers from first and last name.
">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tyler</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>TRUE</h6></li>
    <li><a class="dropdown-item" href="../articles/create_isochrones.html">Gathering Drive Time Isochrones</a></li>
    <li><a class="dropdown-item" href="../articles/geocode.html">Geocoding</a></li>
    <li><a class="dropdown-item" href="../articles/get_census_data.html">Getting Data from the US Census Bureau for Isochrones</a></li>
    <li><a class="dropdown-item" href="../articles/imotive-news.html">Imotive News &amp; Changelog</a></li>
    <li><a class="dropdown-item" href="../articles/my-vignette.html">Searching the NPI Database Starting with Taxonomy Codes</a></li>
    <li><a class="dropdown-item" href="../articles/search_and_process_npi.html">Search and Process NPI Numbers</a></li>
    <li><a class="dropdown-item" href="../articles/aggregating_provider_data.html">Aggregating Provider Data for Analysis</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html#datasets">Datasets</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mufflyt/tyler/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Search and Process NPI Numbers</h1>
                        <h4 data-toc-skip class="author">Tyler Muffly,
MD</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mufflyt/tyler/blob/HEAD/vignettes/search_and_process_npi.Rmd" class="external-link"><code>vignettes/search_and_process_npi.Rmd</code></a></small>
      <div class="d-none name"><code>search_and_process_npi.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The <code>search_and_process_npi</code> function is a tool for
working with datasets containing National Provider Identifier (NPI)
numbers. <code>search_and_process_npi</code> is a wrapper on the
fantastic <code>npi</code> package. Thank you to the authors and
maintainers of the <code>npi</code> package. NPI numbers provide a
standardized way to identify and track healthcare providers, including
physicians, across the United States. Government agencies, such as the
Centers for Medicare &amp; Medicaid Services (CMS), use NPI-based data
to plan and allocate healthcare resources, including provider
reimbursements, medical services, and workforce distribution.</p>
<p><code>search_and_process_npi</code> allows you to search for NPIs
based on the first and last names of clinicians which is the start for
many mystery caller projects after getting the names from a
patient-facing directory of physicians. Getting the NPI number will
unlock multiple demographics for the physicians (gender, medical school
type, address) with a function like `retrieve_clinician_data``.</p>
<div class="section level3">
<h3 id="why-use-apis-for-healthcare-data">Why use APIs for healthcare data?<a class="anchor" aria-label="anchor" href="#why-use-apis-for-healthcare-data"></a>
</h3>
<p>Accessing APIs to retrieve healthcare data can offer several
advantages over downloading and joining data from multiple sources:</p>
<ul>
<li><ol style="list-style-type: decimal">
<li>Real-Time Data: APIs often provide access to real-time or
near-real-time data. Downloading static data files may result in using
outdated information, while APIs can provide the latest data as it
becomes available.</li>
</ol></li>
<li><ol start="2" style="list-style-type: decimal">
<li>Data Integrity: APIs typically offer structured and validated data.
When you access data via an API, you can be more confident in its
quality and consistency. In contrast, downloading and joining data from
various sources may introduce data integrity issues, such as missing or
mismatched records.</li>
</ol></li>
<li><ol start="3" style="list-style-type: decimal">
<li>Efficiency: APIs allow you to request specific subsets of data,
reducing the amount of data transferred and processed. This can improve
efficiency and reduce the processing time, especially when dealing with
large datasets. Downloading and joining entire datasets can be
time-consuming and resource-intensive.</li>
</ol></li>
<li><ol start="4" style="list-style-type: decimal">
<li>Reduced Storage Requirements: Storing large datasets locally can be
costly in terms of storage space. Accessing data through APIs means you
don’t need to maintain a local copy of the entire dataset, saving
storage costs and reducing the risk of data redundancy.</li>
</ol></li>
<li><ol start="5" style="list-style-type: decimal">
<li>Scalability: APIs are designed to handle a high volume of
requests.</li>
</ol></li>
<li><ol start="6" style="list-style-type: decimal">
<li>Security and Privacy: Healthcare data often contains sensitive
information, and APIs can provide better control over data access and
authentication.</li>
</ol></li>
<li><ol start="7" style="list-style-type: decimal">
<li>Data Source Aggregation: APIs can provide a centralized point of
access to data from multiple sources.</li>
</ol></li>
<li><ol start="8" style="list-style-type: decimal">
<li>Data Governance: APIs often come with documentation and usage
policies, which can help ensure compliance with data governance and
privacy regulations. It provides transparency in data usage, making it
easier to adhere to legal and ethical standards.</li>
</ol></li>
<li><ol start="9" style="list-style-type: decimal">
<li>Version Control: APIs are versioned, allowing users to specify the
version of the API they want to use. This ensures backward compatibility
and provides a level of stability in accessing data. When downloading
and joining data files, version control can be more challenging.</li>
</ol></li>
<li><ol start="10" style="list-style-type: decimal">
<li>Reduced Maintenance: APIs are maintained and updated by data
providers. When using APIs, you rely on the provider to manage data
updates, ensuring that you always have access to the latest
information.</li>
</ol></li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Before you can use the <code>search_and_process_npi</code> function,
make sure you have the <code>tyler</code> package installed. You can
install it using the following command:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("tyler")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mufflyt.github.io/mystery/" class="external-link">tyler</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example-usage">Example Usage<a class="anchor" aria-label="anchor" href="#example-usage"></a>
</h2>
<p>National Provider Identifier Search defaults to find individual
people (individuals enumeration_type = “ind”), physicians (“MD”, “DO”)
in the United States listed in the NPPES.</p>
<div class="section level3">
<h3 id="step-1-load-your-data">Step 1: Load Your Data<a class="anchor" aria-label="anchor" href="#step-1-load-your-data"></a>
</h3>
<p>You can provide your data as either a dataframe or specify the path
to a CSV, XLS, or XLSX file containing your data. The dataframe must
have a column named <code>first</code> and another named
<code>last</code> for surname. <code>acog_presidents</code> is an
example data set that you can use for this case.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Toy example using a dataframe</span></span>
<span><span class="va">data_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  first <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"John"</span>, <span class="st">"Jane"</span>, <span class="st">"Bob"</span><span class="op">)</span>,</span>
<span>  last <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Doe"</span>, <span class="st">"Smith"</span>, <span class="st">"Johnson"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Example using a CSV file</span></span>
<span><span class="va">input_file</span> <span class="op">&lt;-</span> <span class="st">"acog_presidents.csv"</span></span>
<span></span>
<span><span class="co"># Note the file must have a column named "first" and a column named "last".  </span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-2-call-the-search_and_process_npi-function">Step 2: Call the <code>search_and_process_npi</code> Function<a class="anchor" aria-label="anchor" href="#step-2-call-the-search_and_process_npi-function"></a>
</h3>
<p>Now, let’s use the <code>search_and_process_npi</code> function to
search for NPI numbers based on the first and last names in your data.
This will cast a WIDE net with matches in <strong><em>all
specialties</em></strong>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example using a CSV file</span></span>
<span><span class="va">output_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_and_process_npi.html">search_and_process_npi</a></span><span class="op">(</span>input_file <span class="op">=</span> <span class="va">input_file</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-3-customize-your-search">Step 3: Customize Your Search<a class="anchor" aria-label="anchor" href="#step-3-customize-your-search"></a>
</h3>
<p>You can customize your NPI search by specifying parameters such as
<code>enumeration_type</code>, <code>limit</code>,
<code>country_code</code>, and <code>filter_credentials</code>. No Magic
numbers :) This will take a long time to run. Best to run it overnight
for over 2,000 searches. For the <code>acog_president</code> dataframe
it will take about 10 minutes. Here’s how you can do it:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example with custom search parameters</span></span>
<span><span class="va">result_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/search_and_process_npi.html">search_and_process_npi</a></span><span class="op">(</span></span>
<span>  input_data <span class="op">=</span> <span class="va">input_file</span>,</span>
<span>  enumeration_type <span class="op">=</span> <span class="st">"ind"</span>,               <span class="co"># Search for individual NPIs</span></span>
<span>  limit <span class="op">=</span> <span class="fl">10</span>,                             <span class="co"># Set the search limit to 10 results per name pair</span></span>
<span>  country_code <span class="op">=</span> <span class="st">"US"</span>,                    <span class="co"># Filter for NPIs in the United States</span></span>
<span>  filter_credentials <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"MD"</span>, <span class="st">"DO"</span><span class="op">)</span>      <span class="co"># Filter for specific credentials</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Do not be worried by this message during the API is accessed. It just
means that there was <strong><em>no match</em></strong> for the
NAMES.</p>
<pre><code>ERROR : `df` must be an npi_results S3 object, not tbl_df. </code></pre>
</div>
<div class="section level3">
<h3 id="step-4-access-the-results">Step 4: Access the Results<a class="anchor" aria-label="anchor" href="#step-4-access-the-results"></a>
</h3>
<p>The function will return a data frame containing the processed NPI
search results. You can access this data frame for further
analysis.There are going to be a <strong><em>lot</em></strong> of
duplicates so you will need to clean this thoughtfully.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># Access the result data frame</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>result_df</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="sc">&gt;</span> output_result</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>              npi basic_first_name basic_last_name basic_middle_name basic_credential basic_sole_proprietor basic_gender</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>    <span class="dv">1</span><span class="sc">:</span> <span class="dv">1053601807</span>             RYAN       SCHLUETER            JEWELL               DO                   YES            M</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>    <span class="dv">2</span><span class="sc">:</span> <span class="dv">1184186256</span>            LAURA          MARTIN         ELIZABETH               DO                    NO            F</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>    <span class="dv">3</span><span class="sc">:</span> <span class="dv">1063703494</span>           LAUREN          BISHOP            ALICIA             M.D.                    NO            F</span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>    <span class="dv">4</span><span class="sc">:</span> <span class="dv">1740800705</span>           LAUREN          BISHOP         ELISABETH             M.D.                    NO            F</span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a>    </span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a>       basic_enumeration_date basic_last_updated basic_certification_date basic_status taxonomies_code</span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a>    <span class="dv">1</span><span class="sc">:</span>             <span class="dv">2011-04-13</span>         <span class="dv">2021-09-30</span>               <span class="dv">2021-09-30</span>            A      <span class="dv">207</span>VM0101X</span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a>    <span class="dv">2</span><span class="sc">:</span>             <span class="dv">2019-04-05</span>         <span class="dv">2023-03-16</span>               <span class="dv">2023-03-16</span>            A      <span class="dv">207</span>P00000X</span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a>    <span class="dv">3</span><span class="sc">:</span>             <span class="dv">2011-04-19</span>         <span class="dv">2023-03-16</span>               <span class="dv">2023-03-16</span>            A      <span class="dv">207</span>VE0102X</span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a>    <span class="dv">4</span><span class="sc">:</span>             <span class="dv">2020-04-20</span>         <span class="dv">2023-07-03</span>               <span class="dv">2023-07-03</span>            A      <span class="dv">207</span>Q00000X</span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a>    </span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a>                     taxonomies_taxonomy_group                                     taxonomies_desc taxonomies_state</span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a>    <span class="dv">1</span><span class="sc">:</span> <span class="dv">193400000</span>X <span class="sc">-</span> Single Specialty Group  Obstetrics <span class="sc">&amp;</span> Gynecology, Maternal <span class="sc">&amp;</span> Fetal Medicine               GA</span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a>    <span class="dv">2</span><span class="sc">:</span>                                                                      Emergency Medicine               MS</span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a>    <span class="dv">3</span><span class="sc">:</span>                                     Obstetrics <span class="sc">&amp;</span> Gynecology, Reproductive Endocrinology               NY</span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a>    <span class="dv">4</span><span class="sc">:</span>                                                                         Family Medicine               TX</span>
<span id="cb6-22"><a href="#cb6-22" tabindex="-1"></a>    </span>
<span id="cb6-23"><a href="#cb6-23" tabindex="-1"></a>           taxonomies_license taxonomies_primary basic_name_prefix basic_name_suffix</span>
<span id="cb6-24"><a href="#cb6-24" tabindex="-1"></a>    <span class="dv">1</span><span class="sc">:</span>              <span class="dv">80379</span>               <span class="cn">TRUE</span>              <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>              <span class="er">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span></span>
<span id="cb6-25"><a href="#cb6-25" tabindex="-1"></a>    <span class="dv">2</span><span class="sc">:</span>              <span class="dv">29372</span>               <span class="cn">TRUE</span>               Dr.              <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span></span>
<span id="cb6-26"><a href="#cb6-26" tabindex="-1"></a>    <span class="dv">3</span><span class="sc">:</span>          <span class="dv">302927-01</span>               <span class="cn">TRUE</span>               Dr.              <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span></span>
<span id="cb6-27"><a href="#cb6-27" tabindex="-1"></a>    <span class="dv">4</span><span class="sc">:</span>              U5076               <span class="cn">TRUE</span>              <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>              <span class="er">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-5-analyze-the-results">Step 5: Analyze the Results<a class="anchor" aria-label="anchor" href="#step-5-analyze-the-results"></a>
</h3>
<p>You can now analyze the NPI search results as needed for your
specific use case. The <code>result_df</code> data frame contains
information about NPIs that match your search criteria. Because these
NPI numbers are directly from NPPES we do not need to run
<code>validate_and_remove_invalid_npi</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Remove selected columns from the 'output_result' dataframe</span></span>
<span><span class="va">processed_result</span> <span class="op">&lt;-</span> <span class="va">output_result</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>    <span class="op">-</span><span class="va">basic_middle_name</span>,</span>
<span>    <span class="op">-</span><span class="va">basic_certification_date</span>,</span>
<span>    <span class="op">-</span><span class="va">basic_name_prefix</span>,</span>
<span>    <span class="op">-</span><span class="va">basic_name_suffix</span>,</span>
<span>    <span class="op">-</span><span class="va">taxonomies_taxonomy_group</span>,</span>
<span>    <span class="op">-</span><span class="va">taxonomies_license</span>,</span>
<span>    <span class="op">-</span><span class="va">taxonomies_primary</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">basic_first_name</span>, <span class="va">basic_last_name</span>, <span class="va">basic_credential</span><span class="op">)</span>,</span>
<span>                       .fns <span class="op">=</span> <span class="op">~</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_remove.html" class="external-link">str_remove_all</a></span><span class="op">(</span><span class="va">.</span>, <span class="st">"[[\\p{P}][\\p{S}]]"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>basic_credential <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html" class="external-link">str_to_upper</a></span><span class="op">(</span><span class="va">basic_credential</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">basic_credential</span>, <span class="st">"MD|DO"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>basic_credential <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html" class="external-link">str_sub</a></span><span class="op">(</span><span class="va">basic_credential</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">basic_credential</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"DO"</span>, <span class="st">"MD"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">taxonomies_desc</span>, <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/modifiers.html" class="external-link">fixed</a></span><span class="op">(</span><span class="st">"Gyn"</span>, ignore_case <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">npi</span>, .keep_all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">processed_result</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">basic_gender</span>, <span class="va">basic_credential</span><span class="op">)</span></span></code></pre></div>
<p>One key step in cleaning the data is filtering the taxonomies. This
can be changed for different applications in various subspecialties.
Note some people are tricky and list their taxonomy specialty as
“Specialist” or something else super vague. We did create a code fix for
this as well, shown below.</p>
<pre><code><span><span class="co"># Filter out rows where 'taxonomies_desc' contains the substring "Gyn" (case-insensitive).  This can be changed for different applications: "Ortho", "Rheum", "Otolary", "Heme", "Anesthesi".  </span></span>
<span></span>
<span><span class="va">processed_result</span> <span class="op">&lt;-</span> <span class="va">processed_result</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">taxonomies_desc</span>, <span class="fu">fixed</span><span class="op">(</span><span class="st">"gyn"</span>, ignore_case <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">|</span></span>
<span>  <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">taxonomies_desc</span>, <span class="fu">fixed</span><span class="op">(</span><span class="st">"specialist"</span>, ignore_case <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre>
<p>Finally it would be helpful to join the results called
<code>processed_result</code> with the input_file called
<code>acog_presidents</code> and this code can be used to do so.</p>
<pre><code><span><span class="va">combined_acog_presidents</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">acog_presidents</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">`processed_result`</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"first"</span> <span class="op">=</span> <span class="st">"basic_first_name"</span>, </span>
<span>                                              <span class="st">"last"</span> <span class="op">=</span> <span class="st">"basic_last_name"</span>, </span>
<span>                                              <span class="st">"honorrific"</span> <span class="op">=</span> <span class="st">"basic_credential"</span><span class="op">)</span>, </span>
<span>                                              ignore.case<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>The <code>search_and_process_npi</code> function simplifies the task
of searching for and processing NPI numbers in healthcare datasets.</p>
</div>
<div class="section level2">
<h2 id="features-and-bugs">Features and bugs<a class="anchor" aria-label="anchor" href="#features-and-bugs"></a>
</h2>
<p>If you have ideas for other features that would make name handling
easier, or find a bug, the best approach is to either report it or add
it!</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tyler Muffly.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
