% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/search_and_process_npi.R
\name{search_and_process_npi}
\alias{search_and_process_npi}
\title{Search and Process NPI Numbers}
\usage{
search_and_process_npi(
  data,
  enumeration_type = "ind",
  limit = NULL,
  country_code = "US",
  filter_credentials = c("MD", "DO"),
  save_chunk_size = 10,
  dest_dir = NULL,
  file_format = NULL,
  accumulate_path = NULL,
  resume = FALSE,
  progress_log = NULL,
  notify = TRUE,
  progress_callback = NULL,
  heartbeat_seconds = NULL,
  progress_log_format = c("text", "csv")
)
}
\arguments{
\item{data}{A data frame with columns 'first' and 'last' containing the names to search.}

\item{enumeration_type}{The enumeration type for NPI search (e.g., "ind", "org", "all"). Default is "ind".}

\item{limit}{The maximum number of search results to request for each name pair. Default is 5.}

\item{country_code}{Filter for only the "US".}

\item{filter_credentials}{A character vector containing the credentials to filter the NPI results. Default is c("MD", "DO").}

\item{save_chunk_size}{The number of results to save per chunk. Default is 10.}

\item{dest_dir}{Destination directory to save chunked results. Default is NULL (no files written).
Files are written using the format specified by \code{file_format}.}

\item{file_format}{Optional override controlling whether chunked and accumulated
results are saved as "csv" or "parquet". When \code{NULL}, the format defaults to CSV
unless \code{accumulate_path} ends with ".parquet".}

\item{accumulate_path}{Optional output path that accumulates every non-empty result.
When provided, results are appended after each successful lookup using the
format inferred from \code{file_format} or the file extension.}

\item{resume}{Logical. If \code{TRUE} and \code{accumulate_path} already exists, names that
have been processed previously (based on the \code{search_term} column) are skipped.}

\item{progress_log}{Optional file path used to log progress updates. The log file
is appended to and created automatically if it does not exist.}

\item{notify}{Logical. If \code{TRUE}, play a notification sound when processing
completes (requires the optional \code{beepr} package). Defaults to \code{TRUE}.}

\item{progress_callback}{Optional function invoked with a named list each
time progress is updated. The list contains fields such as \code{event},
\code{timestamp}, \code{search_term}, \code{rows}, \code{index}, and \code{total}.}

\item{heartbeat_seconds}{Optional numeric value specifying how frequently
(in seconds) to emit a "still processing" heartbeat update while iterating
over names. Set to \code{NULL} to disable the heartbeat.}

\item{progress_log_format}{Either "text" (default) to append human readable
lines to \code{progress_log} or "csv" to write structured entries with columns
\code{timestamp}, \code{event}, \code{search_term}, \code{rows}, and \code{detail}.}
}
\value{
A data frame containing the processed NPI search results.
}
\description{
This function takes an input data frame containing first and last names, performs NPI search and processing,
and filters results based on specified taxonomies. It supports customization for enumeration type, search limit,
and filtering credentials.
}
\examples{
\dontrun{
df <- data.frame(first = "John", last = "Doe")
results <- search_and_process_npi(df)
}
}
\seealso{
Other npi: 
\code{\link{retrieve_clinician_data}()},
\code{\link{search_by_taxonomy}()}
}
\concept{npi}
