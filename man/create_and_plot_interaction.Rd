% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/create_and_plot_interaction.R
\name{create_and_plot_interaction}
\alias{create_and_plot_interaction}
\title{Create and Plot Interaction Effects in GLMM}
\usage{
create_and_plot_interaction(
  data_path,
  response_variable,
  variable_of_interest,
  interaction_variable,
  random_intercept,
  output_path,
  resolution = 100
)
}
\arguments{
\item{data_path}{A character string specifying the path to the .rds file containing the dataset.}

\item{response_variable}{A character string specifying the name of the response variable in the dataset.}

\item{variable_of_interest}{A character string specifying the first categorical predictor variable in the interaction.}

\item{interaction_variable}{A character string specifying the second categorical predictor variable in the interaction.}

\item{random_intercept}{A character string specifying the variable to be used as the random intercept in the model (e.g., "city").}

\item{output_path}{A character string specifying the directory where the interaction plot will be saved.}

\item{resolution}{An integer specifying the resolution (in DPI) for saving the plot. Defaults to 100.}
}
\value{
A list containing the fitted GLMM (\code{model}) and the summarized data used for the effects plot (\code{effects_plot_data}).
}
\description{
This function reads data from a specified file, fits a generalized linear mixed model (GLMM) with a specified interaction term, and creates a plot to visualize the interaction effects. The plot is saved to a specified directory. This is particularly useful for analyzing how two categorical variables interact to affect a response variable, controlling for a random intercept.
}
\details{
The function performs the following steps:
\itemize{
\item Reads the data from the provided file path.
\item Renames and converts the specified columns to appropriate types.
\item Fits a Poisson GLMM with an interaction term and a random intercept.
\item Summarizes the interaction effects and creates a plot.
\item Saves the plot to the specified directory.
}

This function is useful in scenarios where you want to examine the interaction between two categorical variables and their combined effect on a count-based response variable (e.g., the number of business days until an appointment). It can handle complex data structures and controls for variability across groups using random intercepts.
}
\examples{
\dontrun{
# Example 1: Analyzing the effect of gender and appointment center on wait times
result <- create_and_plot_interaction(
  data_path = "Ari/data/Phase2/late_phase_2_ENT_analysis_3.rds",
  response_variable = "business_days_until_appointment",
  variable_of_interest = "central_number_e_g_appointment_center",
  interaction_variable = "gender",
  random_intercept = "city",
  output_path = "Ari/data/figures",
  resolution = 100
)

# Example 2: Examining the interaction between insurance type and scenario on appointment delays
result <- create_and_plot_interaction(
  data_path = "data/healthcare_calls.rds",
  response_variable = "business_days_until_appointment",
  variable_of_interest = "insurance_type",
  interaction_variable = "scenario",
  random_intercept = "state",
  output_path = "figures/insurance_scenario_interaction",
  resolution = 150
)

# Example 3: Studying the interaction between gender and subspecialty in wait times
result <- create_and_plot_interaction(
  data_path = "data/mystery_caller_study.rds",
  response_variable = "waiting_time_days",
  variable_of_interest = "subspecialty",
  interaction_variable = "gender",
  random_intercept = "clinic_id",
  output_path = "results/waiting_times",
  resolution = 300
)
}

}
